<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognify Security Architecture Diagram</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f7fa;
            padding: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .diagram-container {
            width: 1400px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            padding: 40px;
        }
        
        .diagram-header {
            margin-bottom: 32px;
            text-align: center;
        }
        
        .diagram-title {
            font-size: 28px;
            font-weight: 700;
            color: #1F2937;
            margin-bottom: 8px;
        }
        
        .diagram-subtitle {
            font-size: 16px;
            color: #6B7280;
        }
        
        .architecture-svg {
            width: 100%;
            height: auto;
        }
        
        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-top: 32px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #374151;
        }
        
        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .legend-line {
            width: 30px;
            height: 3px;
            border-radius: 2px;
        }
        
        /* SVG Styles */
        .security-boundary {
            fill: none;
            stroke: #EF4444;
            stroke-width: 3;
            stroke-dasharray: 10, 5;
        }
        
        .data-flow {
            fill: none;
            stroke: #4F46E5;
            stroke-width: 3;
            marker-end: url(#arrowhead);
        }
        
        .encrypted-flow {
            fill: none;
            stroke: #10B981;
            stroke-width: 3;
            stroke-dasharray: 5, 5;
            marker-end: url(#arrowhead-green);
        }
        
        @keyframes pulse-glow {
            0%, 100% {
                filter: drop-shadow(0 0 8px rgba(79, 70, 229, 0.4));
            }
            50% {
                filter: drop-shadow(0 0 16px rgba(79, 70, 229, 0.8));
            }
        }
        
        .animated-icon {
            animation: pulse-glow 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="diagram-container">
        <div class="diagram-header">
            <div class="diagram-title">Cognify Security Architecture</div>
            <div class="diagram-subtitle">Multi-tenant SaaS platform with enterprise-grade security</div>
        </div>
        
        <svg class="architecture-svg" viewBox="0 0 1320 900" xmlns="http://www.w3.org/2000/svg">
            <!-- Definitions -->
            <defs>
                <!-- Arrow markers -->
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#4F46E5" />
                </marker>
                <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#10B981" />
                </marker>
                
                <!-- Gradients -->
                <linearGradient id="azure-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#0078D4;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#0063B1;stop-opacity:1" />
                </linearGradient>
                
                <linearGradient id="cognify-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#6366F1;stop-opacity:1" />
                </linearGradient>
                
                <linearGradient id="db-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#059669;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#047857;stop-opacity:1" />
                </linearGradient>
            </defs>
            
            <!-- LAYER 1: CLIENT SIDE (Top) -->
            <!-- Microsoft 365 Tenant -->
            <rect x="50" y="50" width="280" height="180" rx="8" fill="#F0F9FF" stroke="#0078D4" stroke-width="2"/>
            <text x="190" y="80" text-anchor="middle" font-size="16" font-weight="700" fill="#0078D4">Microsoft 365 Tenant</text>
            
            <!-- Azure AD -->
            <rect x="70" y="100" width="110" height="90" rx="6" fill="url(#azure-gradient)"/>
            <text x="125" y="125" text-anchor="middle" font-size="13" font-weight="700" fill="white">Azure AD</text>
            <text x="125" y="145" text-anchor="middle" font-size="11" fill="white">Single Sign-On</text>
            <text x="125" y="162" text-anchor="middle" font-size="11" fill="white">Multi-Factor</text>
            <text x="125" y="179" text-anchor="middle" font-size="11" fill="white">Authentication</text>
            
            <!-- Teams & Apps -->
            <rect x="200" y="100" width="110" height="90" rx="6" fill="#464775"/>
            <text x="255" y="125" text-anchor="middle" font-size="13" font-weight="700" fill="white">Microsoft 365</text>
            <text x="255" y="145" text-anchor="middle" font-size="11" fill="white">Teams</text>
            <text x="255" y="162" text-anchor="middle" font-size="11" fill="white">Word, Excel</text>
            <text x="255" y="179" text-anchor="middle" font-size="11" fill="white">Outlook</text>
            
            <!-- User Icon -->
            <circle cx="380" cy="145" r="25" fill="#6366F1"/>
            <text x="380" y="155" text-anchor="middle" font-size="20" fill="white">ðŸ‘¤</text>
            <text x="380" y="210" text-anchor="middle" font-size="12" font-weight="600" fill="#374151">End Users</text>
            
            <!-- Practice Management System -->
            <rect x="990" y="50" width="280" height="180" rx="8" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
            <text x="1130" y="80" text-anchor="middle" font-size="16" font-weight="700" fill="#92400E">Practice Management</text>
            
            <!-- ActionStep -->
            <rect x="1010" y="100" width="120" height="90" rx="6" fill="#F59E0B"/>
            <text x="1070" y="125" text-anchor="middle" font-size="13" font-weight="700" fill="white">ActionStep</text>
            <text x="1070" y="145" text-anchor="middle" font-size="11" fill="white">Matter Data</text>
            <text x="1070" y="162" text-anchor="middle" font-size="11" fill="white">Time Entries</text>
            <text x="1070" y="179" text-anchor="middle" font-size="11" fill="white">Billing</text>
            
            <!-- Clio -->
            <rect x="1150" y="100" width="100" height="90" rx="6" fill="#D97706"/>
            <text x="1200" y="125" text-anchor="middle" font-size="13" font-weight="700" fill="white">Clio</text>
            <text x="1200" y="145" text-anchor="middle" font-size="11" fill="white">Client Data</text>
            <text x="1200" y="162" text-anchor="middle" font-size="11" fill="white">Financials</text>
            <text x="1200" y="179" text-anchor="middle" font-size="11" fill="white">Documents</text>
            
            <!-- OAuth Badge -->
            <rect x="1090" y="205" width="80" height="20" rx="10" fill="#10B981"/>
            <text x="1130" y="219" text-anchor="middle" font-size="10" font-weight="700" fill="white">OAuth 2.0</text>
            
            <!-- LAYER 2: SECURITY GATEWAY (Middle Top) -->
            <!-- Security Boundary Box -->
            <rect x="30" y="280" width="1260" height="140" rx="8" fill="#FEE2E2" stroke="#EF4444" stroke-width="3" stroke-dasharray="10,5"/>
            <text x="660" y="305" text-anchor="middle" font-size="14" font-weight="700" fill="#991B1B">ðŸ”’ SECURITY BOUNDARY - TLS 1.3 ENCRYPTED</text>
            
            <!-- API Gateway -->
            <rect x="150" y="330" width="400" height="70" rx="6" fill="url(#cognify-gradient)"/>
            <text x="350" y="355" text-anchor="middle" font-size="14" font-weight="700" fill="white">API Gateway & Load Balancer</text>
            <text x="350" y="375" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.9)">â€¢ Rate Limiting â€¢ DDoS Protection</text>
            <text x="350" y="392" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.9)">â€¢ SSL/TLS Termination â€¢ Request Validation</text>
            
            <!-- Auth Service -->
            <rect x="770" y="330" width="380" height="70" rx="6" fill="#6366F1"/>
            <text x="960" y="355" text-anchor="middle" font-size="14" font-weight="700" fill="white">Authentication & Authorization</text>
            <text x="960" y="375" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.9)">â€¢ JWT Token Validation â€¢ Role-Based Access Control</text>
            <text x="960" y="392" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.9)">â€¢ Tenant Isolation â€¢ Session Management</text>
            
            <!-- LAYER 3: APPLICATION LAYER -->
            <rect x="50" y="480" width="600" height="200" rx="8" fill="#EEF2FF" stroke="#4F46E5" stroke-width="2"/>
            <text x="350" y="510" text-anchor="middle" font-size="16" font-weight="700" fill="#4338CA">Multi-Tenant Application Layer</text>
            
            <!-- Tenant A -->
            <rect x="80" y="530" width="160" height="130" rx="6" fill="white" stroke="#818CF8" stroke-width="2"/>
            <text x="160" y="555" text-anchor="middle" font-size="13" font-weight="700" fill="#4338CA">Tenant A</text>
            <text x="160" y="575" text-anchor="middle" font-size="11" fill="#6B7280">Law Firm Alpha</text>
            <rect x="95" y="590" width="130" height="55" rx="4" fill="#F5F3FF"/>
            <text x="160" y="608" text-anchor="middle" font-size="10" fill="#4338CA">Isolated Context</text>
            <text x="160" y="623" text-anchor="middle" font-size="10" fill="#6B7280">tenant_id: alpha</text>
            <text x="160" y="638" text-anchor="middle" font-size="10" fill="#6B7280">schema: alpha_data</text>
            
            <!-- Tenant B -->
            <rect x="265" y="530" width="160" height="130" rx="6" fill="white" stroke="#818CF8" stroke-width="2"/>
            <text x="345" y="555" text-anchor="middle" font-size="13" font-weight="700" fill="#4338CA">Tenant B</text>
            <text x="345" y="575" text-anchor="middle" font-size="11" fill="#6B7280">Law Firm Beta</text>
            <rect x="280" y="590" width="130" height="55" rx="4" fill="#F5F3FF"/>
            <text x="345" y="608" text-anchor="middle" font-size="10" fill="#4338CA">Isolated Context</text>
            <text x="345" y="623" text-anchor="middle" font-size="10" fill="#6B7280">tenant_id: beta</text>
            <text x="345" y="638" text-anchor="middle" font-size="10" fill="#6B7280">schema: beta_data</text>
            
            <!-- Tenant C -->
            <rect x="450" y="530" width="160" height="130" rx="6" fill="white" stroke="#818CF8" stroke-width="2"/>
            <text x="530" y="555" text-anchor="middle" font-size="13" font-weight="700" fill="#4338CA">Tenant C</text>
            <text x="530" y="575" text-anchor="middle" font-size="11" fill="#6B7280">Law Firm Gamma</text>
            <rect x="465" y="590" width="130" height="55" rx="4" fill="#F5F3FF"/>
            <text x="530" y="608" text-anchor="middle" font-size="10" fill="#4338CA">Isolated Context</text>
            <text x="530" y="623" text-anchor="middle" font-size="10" fill="#6B7280">tenant_id: gamma</text>
            <text x="530" y="638" text-anchor="middle" font-size="10" fill="#6B7280">schema: gamma_data</text>
            
            <!-- API Services -->
            <rect x="720" y="480" width="550" height="200" rx="8" fill="#F0FDF4" stroke="#10B981" stroke-width="2"/>
            <text x="995" y="510" text-anchor="middle" font-size="16" font-weight="700" fill="#065F46">Core Services</text>
            
            <!-- Intelligence Service -->
            <rect x="745" y="530" width="155" height="60" rx="6" fill="#10B981"/>
            <text x="822" y="555" text-anchor="middle" font-size="12" font-weight="700" fill="white">Intelligence</text>
            <text x="822" y="572" text-anchor="middle" font-size="10" fill="white">Query Processing</text>
            <text x="822" y="585" text-anchor="middle" font-size="10" fill="white">NLP Engine</text>
            
            <!-- Analytics Service -->
            <rect x="920" y="530" width="155" height="60" rx="6" fill="#059669"/>
            <text x="997" y="555" text-anchor="middle" font-size="12" font-weight="700" fill="white">Analytics</text>
            <text x="997" y="572" text-anchor="middle" font-size="10" fill="white">KPI Calculation</text>
            <text x="997" y="585" text-anchor="middle" font-size="10" fill="white">Metrics Engine</text>
            
            <!-- Integration Service -->
            <rect x="1095" y="530" width="155" height="60" rx="6" fill="#047857"/>
            <text x="1172" y="555" text-anchor="middle" font-size="12" font-weight="700" fill="white">Integration</text>
            <text x="1172" y="572" text-anchor="middle" font-size="10" fill="white">PMS Sync</text>
            <text x="1172" y="585" text-anchor="middle" font-size="10" fill="white">M365 Connector</text>
            
            <!-- Notification Service -->
            <rect x="745" y="605" width="155" height="60" rx="6" fill="#10B981"/>
            <text x="822" y="630" text-anchor="middle" font-size="12" font-weight="700" fill="white">Notifications</text>
            <text x="822" y="647" text-anchor="middle" font-size="10" fill="white">Alerts & Feed</text>
            <text x="822" y="660" text-anchor="middle" font-size="10" fill="white">Email Dispatch</text>
            
            <!-- Auth Service -->
            <rect x="920" y="605" width="155" height="60" rx="6" fill="#059669"/>
            <text x="997" y="630" text-anchor="middle" font-size="12" font-weight="700" fill="white">Auth Service</text>
            <text x="997" y="647" text-anchor="middle" font-size="10" fill="white">Permission Check</text>
            <text x="997" y="660" text-anchor="middle" font-size="10" fill="white">Audit Logging</text>
            
            <!-- Cache Service -->
            <rect x="1095" y="605" width="155" height="60" rx="6" fill="#047857"/>
            <text x="1172" y="630" text-anchor="middle" font-size="12" font-weight="700" fill="white">Cache Layer</text>
            <text x="1172" y="647" text-anchor="middle" font-size="10" fill="white">Redis Cache</text>
            <text x="1172" y="660" text-anchor="middle" font-size="10" fill="white">Query Results</text>
            
            <!-- LAYER 4: DATA LAYER -->
            <rect x="50" y="730" width="600" height="120" rx="8" fill="#ECFDF5" stroke="#10B981" stroke-width="2"/>
            <text x="350" y="760" text-anchor="middle" font-size="16" font-weight="700" fill="#065F46">Encrypted Database (AES-256)</text>
            
            <!-- Database Schemas -->
            <rect x="80" y="780" width="160" height="55" rx="6" fill="url(#db-gradient)"/>
            <text x="160" y="803" text-anchor="middle" font-size="12" font-weight="700" fill="white">Tenant A Schema</text>
            <text x="160" y="820" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.9)">Isolated Data</text>
            
            <rect x="265" y="780" width="160" height="55" rx="6" fill="url(#db-gradient)"/>
            <text x="345" y="803" text-anchor="middle" font-size="12" font-weight="700" fill="white">Tenant B Schema</text>
            <text x="345" y="820" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.9)">Isolated Data</text>
            
            <rect x="450" y="780" width="160" height="55" rx="6" fill="url(#db-gradient)"/>
            <text x="530" y="803" text-anchor="middle" font-size="12" font-weight="700" fill="white">Tenant C Schema</text>
            <text x="530" y="820" text-anchor="middle" font-size="10" fill="rgba(255,255,255,0.9)">Isolated Data</text>
            
            <!-- Infrastructure -->
            <rect x="720" y="730" width="270" height="120" rx="8" fill="#EFF6FF" stroke="#3B82F6" stroke-width="2"/>
            <text x="855" y="760" text-anchor="middle" font-size="16" font-weight="700" fill="#1E40AF">Backup & DR</text>
            
            <rect x="745" y="780" width="110" height="55" rx="6" fill="#3B82F6"/>
            <text x="800" y="803" text-anchor="middle" font-size="11" font-weight="700" fill="white">Daily Backups</text>
            <text x="800" y="820" text-anchor="middle" font-size="10" fill="white">Point-in-Time</text>
            
            <rect x="870" y="780" width="105" height="55" rx="6" fill="#2563EB"/>
            <text x="922" y="803" text-anchor="middle" font-size="11" font-weight="700" fill="white">Geo-Replicate</text>
            <text x="922" y="820" text-anchor="middle" font-size="10" fill="white">Multi-Region</text>
            
            <!-- Monitoring -->
            <rect x="1020" y="730" width="250" height="120" rx="8" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
            <text x="1145" y="760" text-anchor="middle" font-size="16" font-weight="700" fill="#92400E">Monitoring</text>
            
            <rect x="1040" y="780" width="100" height="55" rx="6" fill="#F59E0B"/>
            <text x="1090" y="803" text-anchor="middle" font-size="11" font-weight="700" fill="white">Audit Logs</text>
            <text x="1090" y="820" text-anchor="middle" font-size="10" fill="white">All Actions</text>
            
            <rect x="1155" y="780" width="100" height="55" rx="6" fill="#D97706"/>
            <text x="1205" y="803" text-anchor="middle" font-size="11" font-weight="700" fill="white">Alerts</text>
            <text x="1205" y="820" text-anchor="middle" font-size="10" fill="white">24/7 Monitor</text>
            
            <!-- DATA FLOWS -->
            <!-- Azure AD to API Gateway -->
            <path d="M 125 190 L 125 240 L 350 240 L 350 330" class="encrypted-flow"/>
            <text x="180" y="230" font-size="10" fill="#10B981" font-weight="600">Encrypted Auth Token</text>
            
            <!-- Teams to API Gateway -->
            <path d="M 255 190 L 255 260 L 350 260 L 350 330" class="data-flow"/>
            <text x="240" y="250" font-size="10" fill="#4F46E5" font-weight="600">User Requests</text>
            
            <!-- User to Teams -->
            <path d="M 380 170 L 380 210 L 310 210 L 310 190" class="data-flow"/>
            
            <!-- API Gateway to Auth -->
            <path d="M 550 365 L 770 365" class="encrypted-flow"/>
            <text x="630" y="355" font-size="10" fill="#10B981" font-weight="600">Token Validation</text>
            
            <!-- Auth to Application Layer -->
            <path d="M 960 400 L 960 440 L 530 440 L 530 530" class="data-flow"/>
            <text x="700" y="430" font-size="10" fill="#4F46E5" font-weight="600">Authorized Requests</text>
            
            <!-- PMS to Integration Service -->
            <path d="M 1130 230 L 1130 330 L 1172 330 L 1172 530" class="encrypted-flow"/>
            <text x="1145" y="380" font-size="10" fill="#10B981" font-weight="600">OAuth API</text>
            
            <!-- Application to Services -->
            <path d="M 650 580 L 745 560" class="data-flow"/>
            <path d="M 650 580 L 920 560" class="data-flow"/>
            
            <!-- Services to Database -->
            <path d="M 822 590 L 350 730" class="encrypted-flow"/>
            <path d="M 997 590 L 350 730" class="encrypted-flow"/>
            <text x="550" y="660" font-size="10" fill="#10B981" font-weight="600">Encrypted Queries</text>
            
            <!-- Tenant isolation lines -->
            <line x1="160" y1="660" x2="160" y2="780" stroke="#818CF8" stroke-width="2" stroke-dasharray="5,5"/>
            <line x1="345" y1="660" x2="345" y2="780" stroke="#818CF8" stroke-width="2" stroke-dasharray="5,5"/>
            <line x1="530" y1="660" x2="530" y2="780" stroke="#818CF8" stroke-width="2" stroke-dasharray="5,5"/>
            
            <!-- Security badges -->
            <rect x="560" y="800" width="70" height="22" rx="11" fill="#EF4444"/>
            <text x="595" y="815" text-anchor="middle" font-size="10" font-weight="700" fill="white">ðŸ”’ AES-256</text>
            
            <rect x="200" y="345" width="70" height="22" rx="11" fill="#10B981"/>
            <text x="235" y="360" text-anchor="middle" font-size="10" font-weight="700" fill="white">TLS 1.3</text>
        </svg>
        
        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-line" style="background: #4F46E5;"></div>
                <span>Data Flow</span>
            </div>
            <div class="legend-item">
                <div class="legend-line" style="background: #10B981; opacity: 0.7;"></div>
                <span>Encrypted Connection</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #FEE2E2; border: 2px dashed #EF4444;"></div>
                <span>Security Boundary</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #EEF2FF; border: 2px solid #4F46E5;"></div>
                <span>Multi-Tenant Layer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #ECFDF5; border: 2px solid #10B981;"></div>
                <span>Encrypted Storage</span>
            </div>
        </div>
    </div>
</body>
</html>